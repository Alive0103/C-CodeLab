# 数据库配置说明

## 配置变更

已将数据源从H2内存数据库改为TiDB云数据库。

## 配置详情

### 数据库连接信息
- **数据库类型**: TiDB (MySQL兼容)
- **主机**: gateway01.ap-northeast-1.prod.aws.tidbcloud.com
- **端口**: 4000
- **数据库名**: c_test
- **用户名**: 2GtHVk27Cjofv3g.root
- **SSL**: 启用

### 环境变量配置

需要在启动应用前设置数据库密码环境变量：

#### Windows (PowerShell)
```powershell
$env:DB_PASSWORD="your_actual_tidb_password"
mvn spring-boot:run
```

#### Windows (CMD)
```cmd
set DB_PASSWORD=your_actual_tidb_password
mvn spring-boot:run
```

#### Linux/Mac
```bash
export DB_PASSWORD="your_actual_tidb_password"
mvn spring-boot:run
```

### IDE配置

如果使用IDE运行，可以在运行配置中添加环境变量：
- 变量名: `DB_PASSWORD`
- 变量值: 你的实际TiDB密码

## 连接池配置

已配置HikariCP连接池：
- 最大连接数: 10
- 最小空闲连接: 5
- 连接超时: 30秒
- 空闲超时: 10分钟
- 连接最大生命周期: 30分钟

## SSL证书

应用会使用项目根目录下的 `isrgrootx1.pem` 证书文件进行SSL连接。

## 注意事项

1. **密码安全**: 请勿将真实密码提交到代码仓库
2. **环境变量**: 使用环境变量 `DB_PASSWORD` 来设置数据库密码
3. **网络连接**: 确保能够访问TiDB云服务
4. **SSL证书**: 确保证书文件 `isrgrootx1.pem` 存在于项目根目录

## 测试连接

启动应用后，检查日志中是否有数据库连接成功的消息。如果连接失败，请检查：
1. 网络连接是否正常
2. 密码是否正确
3. SSL证书是否存在
4. 防火墙设置

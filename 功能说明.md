# C-CodeLab 功能说明

## 📋 项目概述

C-CodeLab 是一个基于 Web 的 C 语言在线编程环境，提供代码编辑、编译、运行和用户管理功能。

## 🎯 核心功能

### 1. 用户认证系统

#### 用户注册
- **功能**：新用户注册账户
- **要求**：
  - 用户名：唯一标识
  - 密码：至少8位，包含字母、数字和特殊字符(@$%!%*#?&)
  - 邮箱：有效邮箱格式
- **验证**：用户名唯一性检查，密码复杂度验证，邮箱格式验证

#### 用户登录
- **功能**：用户身份验证
- **方式**：用户名/密码登录
- **认证**：Session 会话管理
- **安全**：密码加密存储，会话超时管理

### 2. 代码编辑器

#### 编辑器功能
- **技术**：Monaco Editor
- **特性**：
  - C 语言语法高亮
  - 智能代码提示
  - 自动缩进和格式化
  - 括号匹配
  - 代码折叠

#### 代码管理
- **保存**：将代码片段保存到云端
- **标题**：为代码片段添加描述性标题
- **语言**：支持 C 语言
- **可见性**：私有/公开设置

### 3. 代码编译与执行

#### 编译过程
- **编译器**：GCC
- **环境**：Java ProcessBuilder
- **安全**：线程池隔离，资源限制
- **超时**：默认5秒执行限制

#### 执行结果
- **标准输出**：程序运行结果
- **错误信息**：编译错误和运行时错误
- **退出码**：程序执行状态
- **实时反馈**：WebSocket 实时更新

### 4. 代码历史管理

#### 代码片段历史
- **查看**：分页显示个人代码片段
- **信息**：标题、语言、创建时间、可见性
- **预览**：代码内容预览
- **操作**：查看详情、删除记录

#### 执行记录历史
- **记录**：所有代码执行历史
- **信息**：执行时间、退出码、输出结果
- **错误**：编译错误和运行时错误记录
- **操作**：查看详情、删除记录

### 5. 用户信息管理

#### 基本信息
- **查看**：用户名、邮箱、注册时间
- **修改**：更新邮箱地址
- **验证**：邮箱格式验证，唯一性检查

#### 密码管理
- **修改**：更改登录密码
- **验证**：原密码验证
- **安全**：新密码复杂度要求
- **确认**：密码确认机制

## 🏗️ 技术架构

### 后端技术栈
- **框架**：Spring Boot 3
- **安全**：Spring Security
- **数据**：JPA/Hibernate
- **数据库**：MySQL/TiDB
- **认证**：Session 管理
- **编译**：GCC 编译器

### 前端技术栈
- **框架**：Vue.js 3
- **状态**：Pinia
- **路由**：Vue Router
- **HTTP**：Axios
- **编辑器**：Monaco Editor
- **样式**：CSS3

### 数据库设计

#### 用户表 (user)
```sql
- id: 主键
- username: 用户名（唯一）
- password_hash: 密码哈希
- password_salt: 密码盐值
- email: 邮箱
- role: 用户角色
- enabled: 账户状态
- created_at: 创建时间
```

#### 代码片段表 (code_snippet)
```sql
- id: 主键
- user_id: 用户ID（外键）
- title: 标题
- code_content: 代码内容
- language: 编程语言
- is_public: 是否公开
- created_at: 创建时间
- updated_at: 更新时间
```

#### 执行记录表 (execution_record)
```sql
- id: 主键
- user_id: 用户ID（外键）
- title: 标题
- code: 代码内容
- output: 标准输出
- error: 错误信息
- exit_code: 退出码
- created_at: 创建时间
```

## 🔧 API 接口

### 认证接口
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `GET /api/user` - 获取当前用户信息

### 用户管理接口
- `GET /api/user/profile` - 获取用户信息
- `PUT /api/user/profile` - 更新用户信息
- `PUT /api/user/password` - 修改密码

### 代码管理接口
- `GET /api/user/code-snippets` - 获取代码片段列表
- `GET /api/user/execution-records` - 获取执行记录列表
- `DELETE /api/user/code-snippets/{id}` - 删除代码片段
- `DELETE /api/user/execution-records/{id}` - 删除执行记录

### 代码执行接口
- `POST /api/code/save` - 保存代码片段
- `POST /api/code/run` - 执行代码
- `GET /api/code/results` - 获取执行结果

## 🎨 用户界面

### 页面结构
1. **登录页面** (`/login`)
   - 用户登录表单
   - 注册链接

2. **注册页面** (`/register`)
   - 用户注册表单
   - 密码复杂度提示

3. **编辑器页面** (`/editor`)
   - 代码编辑器
   - 运行结果面板
   - 历史记录列表

4. **代码历史页面** (`/code-history`)
   - 代码片段管理
   - 执行记录管理

5. **个人中心页面** (`/profile`)
   - 用户信息管理
   - 密码修改

### 导航结构
- **顶部导航**：代码历史、个人中心
- **侧边栏**：历史记录列表
- **主区域**：编辑器或管理界面

## 🔒 安全特性

### 认证安全
- 密码加密存储（BCrypt）
- Session 会话管理
- 登录状态验证
- 自动登出机制

### 代码执行安全
- 进程隔离
- 资源限制
- 执行超时
- 错误处理

### 数据安全
- 输入验证
- SQL 注入防护
- XSS 防护
- CSRF 保护

## 🚀 部署说明

### 环境要求
- Java 17+
- Node.js 18+
- MySQL 8.0+ 或 TiDB 7.0+
- Maven 3.8+

### 配置步骤
1. 数据库配置
2. 后端服务启动
3. 前端构建部署
4. 反向代理配置

## 📈 未来规划

### 功能扩展
- 多语言支持
- 代码分享功能
- 协作编程
- 代码版本控制

### 性能优化
- 缓存机制
- 负载均衡
- 数据库优化
- 前端优化

### 用户体验
- 主题切换
- 快捷键支持
- 移动端适配
- 离线支持

开题报告
项目仓库
C-CodeLab https://github.com/Alive0103/C-CodeLab#
https://github.com/Alive0103/C-CodeLab.git
题目描述
设计并实现一个在线的 C 语言代码编辑、编译和运行环境，面向学习者和开发者，方便快速测试和调试 C 语言代码片段。
核心功能：
（1）页面代码编辑器：支持多行代码输入与编辑，具备语法高亮、自动缩进、括号匹配等功能。集成 Monaco Editor 或 CodeMirror，提升编辑体验。
（2）代码编译与执行：后台调用本地 C 编译器（如 gcc、clang）进行代码编译。支持即时运行编译后的程序，返回标准输出、标准错误和运行时错误信息。
框架设计与技术栈参考：
前端：
Vue.js + HTML + CSS + JavaScript：构建响应式用户界面。
Monaco Editor / CodeMirror：集成强大的代码编辑器组件，支持 C 语言语法高亮和智能提示。
网络请求：
Axios 或 Fetch API：实现与后端的异步通信，提交代码，获取编译和运行结果。
后端：
Java（Spring Boot）：搭建 RESTful API 服务，处理前端请求。负责调用本地 C 编译器（gcc、clang）进行代码编译和执行。
代码编译执行：通过系统调用执行编译命令，捕获编译输出和错误。运行编译生成的可执行文件，捕获标准输出和错误。
存储：
MySQL：存储用户信息、代码片段等。
基本设计
暂时无法在飞书文档外展示此内容
后端
1. 认证模块（JWT）
功能：实现用户登录验证、JWT令牌生成与校验，保障接口访问安全。
实现细节：
- 基于Spring Security，自定义UserDetailsService从MySQL加载用户信息。
- 集成jjwt库，在用户登录成功时生成包含用户身份的JWT令牌
- 自定义JwtFilter拦截所有API请求，校验Authorization头中JWT令牌的合法性（签名、过期时间等）。
2. 代码处理模块
核心功能：接收前端代码，调用本地C编译器编译，执行可执行文件并捕获输出。
编译与运行流程：
1. 代码持久化：将前端传入的C代码写入临时文件（如/tmp/code.c）。
2. 调用编译器：通过Java的ProcessBuilder执行系统命令（如gcc /tmp/code.c -o /tmp/code），捕获编译的标准输出（stdout）与错误（stderr）。
3. 执行程序：若编译成功，执行生成的可执行文件（如/tmp/code），通过ProcessBuilder捕获运行时的标准输出与错误。
4. 异步处理：使用ThreadPoolExecutor创建线程池，异步处理编译和运行任务，避免阻塞Tomcat主线程，提升并发能力。
3. 数据存储模块
表结构设计：
- user表：存储用户信息，字段包括id（主键）、username（唯一用户名）、password（加密后密码）、create_time等。
- code_snippet表（可选）：存储用户代码片段，字段包括id（主键）、user_id（外键，关联user表）、code_content（代码内容）、create_time等。
功能：
- 支撑用户注册与登录验证（通过user表）。
- 可选：保存用户历史代码片段，便于后续查看与复用（通过code_snippet表）。
前端
1. 界面与组件结构
前端基于Vue.js构建单页应用，核心组件分为三类：
- 登录/注册组件：处理用户身份认证，与后端JWT服务交互。
- 代码编辑器组件：集成Monaco Editor，提供C语言代码编辑能力（语法高亮、自动缩进等）。
- 结果展示组件：展示代码编译日志、程序运行输出及错误信息。
2. 代码编辑器（Monaco Editor）
功能特性：
- 语法高亮：对C语言关键字、变量、注释等进行颜色区分，提升代码可读性。
- 自动缩进：输入代码时自动保持缩进层级，符合C语言编码规范。
- 括号匹配：输入() {} []等括号时自动成对匹配，减少语法错误。
- 代码折叠：支持函数、代码块的折叠/展开，便于大段代码的结构管理。
集成实现：
在Vue组件中引入Monaco Editor库，初始化时指定语言为'c'并配置编辑器选项（主题、缩进等）：
import * as monaco from 'monaco-editor';

export default {
  mounted() {
    // 初始化Monaco Editor
    this.editor = monaco.editor.create(
      document.getElementById('editor-container'),
      {
        value: '// 请输入C语言代码...\n',
        language: 'c', // 指定为C语言
        theme: 'vs-dark', // 暗色主题（可选）
        autoIndent: 'full', // 自动缩进
        fontSize: 14,
      }
    );
  },
  methods: {
    // 获取编辑器中当前代码
    getCode() {
      return this.editor.getValue();
    }
  }
};
3. 网络请求（Axios）
负责前端与后端的异步通信，核心请求场景：
- 登录请求：
  - API：POST /api/auth/login
  - 参数：{ username: String, password: String }
  - 功能：提交用户凭证，获取JWT认证令牌。
  - 处理：成功后将JWT存储于localStorage，后续请求通过Authorization请求头携带令牌。
- 代码运行请求：
  - API：POST /api/code/run
  - 请求头：{ Authorization: 'Bearer [JWT_TOKEN]' }（携带JWT令牌，用于身份校验）
  - 参数：{ code: String }（编辑器中输入的C语言代码）
  - 功能：提交代码至后端，请求编译与运行，接收结果并展示。
主链路
1. 用户登录流程
5. 前端登录页输入username和password，点击“登录”按钮。
6. Axios发送POST /api/auth/login请求至后端。
7. 后端从MySQL查询用户，验证密码；验证成功则生成JWT令牌，返回给前端。
8. 前端将JWT存入localStorage，并跳转到代码编辑页面。
2. 代码编辑与运行流程
9. 用户在Monaco Editor中编写C代码（如#include <stdio.h> int main() { printf("Hello, World!"); return 0; }）。
10. 点击“运行”按钮，前端通过Axios发送POST /api/code/run请求，携带代码与JWT令牌。
11. 后端JwtFilter校验令牌合法性后，将请求转发至**代码处理模块**。
12. 代码处理模块执行以下操作：
  - 将代码写入临时文件/tmp/code.c。
  - 异步调用gcc /tmp/code.c -o /tmp/code编译代码，捕获编译日志。
  - 若编译成功，调用/tmp/code执行程序，捕获运行输出与错误。
13. 后端将编译日志、运行输出、错误信息封装为响应，返回给前端。
14. 前端接收结果，在“结果展示区”显示：若编译错误，高亮显示错误日志；若运行成功，显示程序输出（如Hello, World!）。
中间件
数据库 TiDB
https://tidbcloud.com/clusters/10540903474298235018/sqleditor?orgId=1372813089209254638&projectId=1372813089454572319
连接方法：
mysql://2GtHVk27Cjofv3g.root:qBoQciGIrjAeB61a@gateway01.ap-northeast-1.prod.aws.tidbcloud.com:4000/c_test
或者自己输入：
HOST: gateway01.ap-northeast-1.prod.aws.tidbcloud.com
PORT: 4000
USERNAME: 2GtHVk27Cjofv3g.root
PASSWORD: qBoQciGIrjAeB61a
DATABASE: c_test
CA: <CA_PATH>
需要勾选使用 SSL，CA证书：
暂时无法在飞书文档外展示此内容
Redis
https://cloud.redis.io/#/data-access-control/users
user_name: redisuser
pass_word: Ln216812_
endpoint: redis-12019.crce178.ap-east-1-1.ec2.redns.redis-cloud.com:12019
<dependencies>
    <dependency>
        <groupId>io.lettuce</groupId>
        <artifactId>lettuce-core</artifactId>
        <version>6.3.0</version> 
    </dependency>
</dependencies>
import io.lettuce.core.RedisClient;
import io.lettuce.core.api.StatefulRedisConnection;
import io.lettuce.core.api.sync.RedisStringCommands;

public class RedisJavaExample {
    public static void main(String[] args) {
        // 1. 配置 Redis 连接信息
        String host = "redis-12019.crce178.ap-east-1-1.ec2.redns.redis-cloud.com";
        int port = 12019;
        String username = "redisuser";
        String password = "Ln216812_";

        // 2. 构建 Redis 连接 URI（包含认证信息和 SSL 加密）
        // Redis Cloud 强制要求 TLS 加密，因此需通过 URI 启用
        String redisUri = String.format(
            "redis://%s:%s@%s:%d",
            username,
            password,
            host,
            port
        );

        // 3. 创建 Redis 客户端并建立连接
        RedisClient client = RedisClient.create(redisUri);
        try (StatefulRedisConnection<String, String> connection = client.connect()) {
            RedisStringCommands<String, String> syncCommands = connection.sync();
            syncCommands.set("foo", "bar");
            String result = syncCommands.get("foo");
            System.out.println(result); // 输出：bar
        } catch (Exception e) {
            System.err.println("连接或操作失败：" + e.getMessage());
        } finally {
            client.shutdown();
        }
    }
}
ApiFox
本地起起来测~
加入链接： https://app.apifox.com/invite?token=9kd9bDqoJKvjJ3e8TltBg
项目地址：https://app.apifox.com/project/7184276
Git规范
提issue和pr
一个功能的开发过程：
1. (可选)先创建一个issue，自己写好要完成的任务，并分配给自己。
2. 将项目fork出一个自己的项目，在自己这个项目上开发   (团队小项目不需要)
3. 对于这个issue，从main分支创建一个另外的本地分支(名称可自选，如feature/payment、fix/...，表明要实现功能或者改bug)，用于开发。(git branch dev git checkout dev)
4. 提交时记得切换到这个dev分支，再push到仓库内对应的这个分支上。
5. 在团队项目仓库的pr里面创建一个pr，链接到完成的对应issue。
6. 等待其他人进行代码审查与合并。
7. 合并后可以删除本地的这个分支git checkout main git branch -d dev
[图片]
git处理冲突
不确定的地方问一下再merge
git rebase vs git merge
.gitignore
不让git上传某些文件
谨慎处理回退
可能会把本地代码都删掉，还原不了的那种
commit 的内容
commit 时以 fix #1:这种开头.#1即这个commit解决的issue的编号。会在merge后自动关闭相关的issue。
[图片]
可以使用大模型辅助生成。
[图片]

规范
https://github.com/uber-go/guide/blob/master/style.md
提交规范；
https://www.conventionalcommits.org/en/v1.0.0/#summary
https://github.com/bitdance-panic/gobuy/blob/main/%E8%A7%84%E8%8C%83.md
详细设计
后端详细设计
前端详细设计
扩展功能点
1. 用户信息/密码修改
2. 匿名登陆
3. 多重验证
4. 沙箱运行代码
